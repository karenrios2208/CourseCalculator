<!DOCTYPE html>
<html>

<head id="Security">
    <title>Log in</title>
    <link rel="stylesheet" href="../resources/login.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins" />

</head>

<body>
    <h1>Log in</h1>
    <div>
        <form id="infouser" action="mainPage.html">
            <p> Username: </p>
            <input type="text" id="user" name="user" />
            <br />
            <p> Password: </p>
            <input type="text" id="pwd" name="pwd" />
            <br />
            <button type="submit" name="LOGIN">LOGIN</button>
            <p id = "error"></p>
        </form>
    </div>

    <script>

        var xhttp;
        var form = document.getElementById("infouser");
        form.onsubmit = function (e) {
            e.preventDefault();
            var formdata = new FormData(form);
            xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    //var karen = JSON.parse(this.responseText);
                    document.getElementById("Security").innerHTML = '<meta http-equiv="refresh" content="0; URL=mainPage.html" />';
                }
                else if (this.readyState == 4 && this.status == 404) {
                    //var karen = JSON.parse(this.responseText);
                    document.getElementById("error").innerHTML = 'Wrong email or password';
                }
                else if (this.readyState == 4 && this.status == 505) {
                    //var karen = JSON.parse(this.responseText);
                    document.getElementById("error").innerHTML = 'Not empty field allowed';
                }
            };

            xhttp.open("POST", "../Controllers/User/search.php", false);
            xhttp.send(formdata);
        }

    </script>


</body>

</html>